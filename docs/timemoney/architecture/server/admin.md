# admin (odc-admin)

bash-утилита, доступ к которой проходит через SSH
для управления сервером

```bash
~$ ssh <адрес_сервера>
~$ odc-admin -h
```

TODO

## Функции

### init

```bash
~$ odc-admin init
```

Функция `init` выдаёт ошибку, если `mpk`/`mok` ключи уже сгенерированы

Иначе генерирует  `mpk`/`mok` ключи и выводит
`mok` ключ в консоли.

Так же эта команда создаёт
сервисный online кошелёк
(используется для эксченджа)

### server-append

```bash
~$ odc-admin server-append <ip> <mok> 
```

Данная функция добавляет сервер в кольцо и подписывает его 
`<mok>` ключ.

:::note
Адиминистратор получает `mok` ключ любым удобным доверенным способом
от администратора другого сервера. 
:::

### server-delete

```bash
~$ odc-admin server-delete <ip> 
```

Удаляет сервер из кольца и удаляет его `mok` и подпись его `mok`.

### sync

```bash
~$ odc-admin sync
```

Данная фунцкия делает синхронизацию:
1. По `api` обращается ко всем добавленным серверам
2. Извлекает их `mok` ключи.
3. Проверяет корректность
4. Проверяет что все серверы подписали ключи всех серверов
5. Выводит ошибку или "OK"
 

:::note
Если команда `sync` вывела `OK`, то это означает что все серверы 
взаимно друг друга подписали.
:::


### check-requests

Данная функция возвращает
неподтверждённые заявки новых кошельков.

Т.е. пользователь установил приложение, 
сгенерировал свои `spk`/`sok` ключи
и подал свой `sok` ключ на заявку.

```bash
~$ odc-admin check-requests all
```

Выдает все заявки в виде:
1. UUID заявки
2. Время заявки
3. Имя 

### init-root-wallet

Первый кошелёк  `root` должен быть создан вручную хотя бы одним из 
администраторов.

```bash
~$ odc-admin init-root-wallet 
```